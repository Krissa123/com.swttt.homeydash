"use strict";function getRandomId(){return(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase()}function createCookie(a,b,c){var d="";if(c){var e=new Date;e.setTime(e.getTime()+24*c*60*60*1e3),d="; expires="+e.toUTCString()}document.cookie=a+"="+b+d+"; path=/"}function fetchData(){var a=angular.injector(["ng","ngStorage"]),b=a.get("$http"),c=a.get("$window");a.get("$localStorage");return b.get("/api/app/com.swttt.homeydash/config.json").then(function(a){var b=a.data.result;b.forcepersist?localStorage.setItem("bearer_token",a.data.result.bearertoken):localStorage.setItem("bearer_token",null),angular.module("homeydashV3App").constant("CONFIG",b),angular.module("homeydashV3App").run(["$rootScope","CONFIG",function(a,b){a.CONFIG=b}]),console.log(b)},function(a){401===a.status&&(console.log(a),c.location.href="/manager/users/?redirect_uri=%2Fapp%2Fcom.swttt.homeydash%2F"),403===a.status&&(console.log(a),c.location.href="/manager/users/?redirect_uri=%2Fapp%2Fcom.swttt.homeydash%2F")})}function bootstrapApplication(){angular.element(document).ready(function(){angular.bootstrap(document,["homeydashV3App"])})}"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(a){var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a||{},b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype||{},e.prototype=new d,e}),jQuery.fn.cssNumber=function(a){var b=parseInt(this.css(a),10);return isNaN(b)?0:b};var httpconfig={headers:{Authorization:"Bearer da3110b6042fae4bd73713189240fc8c797da0c7","Content-Type":"application/json"}};localStorage.getItem("bearer_token")&&createCookie("bearer_token",localStorage.getItem("bearer_token"),7),console.log("Bearer found! "+localStorage.getItem("bearer_token")),fetchData().then(bootstrapApplication),angular.module("homeydashV3App",["ngAnimate","ngResource","ngSanitize","ngMaterial","ui.router","ngScrollbars","ngStorage","mgo-angular-wizard","rt.debounce","gridster","ui.sortable"]).run(["$rootScope","alldevices","CONFIG","socket","wallpaper","$http","savesettings",function(a,b,c,d,e,f,g){a.CONFIG=c,e().then(function(b){a.wallpaper=b.data.result.properties.wallpaper,$.backstretch("/manager/personalization/wallpapers/"+b.data.result.properties.wallpaper)},function(a){$.backstretch("/manager/personalization/wallpapers/system/homey.jpg")}),f.get("setup.json").then(function(b){a.SETUP=b.data},function(a){console.log(a)}),b().then(function(b){a.devicelist=b.data.result}).then(function(){angular.forEach(c.pages,function(b){angular.forEach(b.widgets,function(b){angular.forEach(b.capability,function(c){d.on(c,b.deviceid,function(d){a.devicelist[b.deviceid].state[c]=d,a.$apply()})})})})}),angular.forEach(a.CONFIG.pages,function(b){angular.forEach(b.widgets,function(b){b.id||(b.id=getRandomId(),console.log(b.name+" has no ID, added on for you! :)"),g.save(a.CONFIG))})})}]).config(["$mdThemingProvider","$mdIconProvider","$sceProvider",function(a,b,c){c.enabled(!1);var d=["red","pink","purple","deep-purple","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","deep-orange","brown","grey","blue-grey"];a.theme("default").primaryPalette("blue-grey").accentPalette("blue-grey"),angular.forEach(d,function(b){a.theme(b).primaryPalette(b).accentPalette(b)}),a.alwaysWatchTheme(!0),b.iconSet("fa")}]).filter("numberEx",["numberFilter","$locale",function(a,b){var c=b.NUMBER_FORMATS;return function(b,d){var e=a(b,d),f=e.indexOf(c.DECIMAL_SEP);if(-1==f)return e;var g=e.substring(0,f),h=(Number(e.substring(f))||"").toString();return g+h.substring(1)}}]).run(["$rootScope","$state","$localStorage",function(a,b,c){c.defaultPage||(c.defaultPage=!1),a.$on("$stateChangeStart",function(d,e,f){e.redirectTo&&(d.preventDefault(),b.go(e.redirectTo,f,{location:"replace"})),"main.page"===e.name&&(a.CONFIG.pages.filter(function(a){return a.pagename===f.pagename}).length||(d.preventDefault(),console.log("Page not found!"),b.go("main"))),"setup.page"===e.name&&(a.CONFIG.pages.filter(function(a){return a.pagename===f.pagename}).length||(d.preventDefault(),console.log("Page not found!"),b.go("setup"))),"main"===e.name&&c.defaultPage&&a.CONFIG.pages.filter(function(a){return a.pagename===c.defaultPage}).length&&(d.preventDefault(),console.log("default page found"),b.go("main.page",{pagename:c.defaultPage},{location:"replace"}))})}]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("setup",{url:"/settings",templateUrl:"views/setup.html",controller:"SetupCtrl"}).state("setup.generalsettings",{url:"/general",templateUrl:"views/setup/generalsettings.html"}).state("setup.page",{url:"/:pagename",templateUrl:"views/setup/page.html"}).state("setup.plugins",{url:"/plugins",templateUrl:"views/setup-plugins.html"}).state("main",{url:"/",templateUrl:"views/main.html"}).state("main.page",{url:":pagename",templateUrl:"views/device-page.html"}).state("directpage",{url:"/direct/:pagename",templateUrl:"views/direct-page.html"})}]),angular.module("homeydashV3App").controller("MainCtrl",["$element","savesettings","$localStorage","$mdSidenav","$window","$scope","$stateParams","device","socket","alldevices","$rootScope","CONFIG","$mdDialog",function(a,b,c,d,e,f,g,h,i,j,k,l,m){f.params=g,f.localStorage=c,f.hideOverlay=!1,f.localStorage.general||(f.localStorage.general={}),f.localStorage.general.widgetbackground||(f.localStorage.general.widgetbackground="transparant-bg");f.saveSettings=function(){b.save(k.CONFIG),console.log("New settings saved!")},localStorage.getItem("agreement")||m.show({templateUrl:"views/dialogs/agreement.html",clickOutsideToClose:!1,fullscreen:!0,controller:"AgreementCtrl",hasBackdrop:!1,escapeToClose:!1}).then(function(){localStorage.setItem("agreement",!0)});var n=e.innerHeight-50,o=60,p=Math.floor(n/o),q=n-Math.floor(n/o),r=p+q/p-10,s=e.innerHeight-20,t=60,u=Math.floor(s/t),v=s-Math.floor(s/t),w=u+v/u;f.gridsterOpts={columns:30,colWidth:"auto",rowHeight:r,margins:[10,10],floating:!1,defaultSizeX:1,swapping:!0,mobileModeEnabled:!0,mobileBreakPoint:600,resizable:{enabled:!1},draggable:{enabled:!1,scrollSensitivity:60,scrollSpeed:5,start:function(a,b,c){},drag:function(a,b,c){},stop:function(a,b,c){}}},f.gridsterOptsDirect={columns:30,colWidth:"auto",rowHeight:w,margins:[10,10],floating:!1,defaultSizeX:1,swapping:!0,mobileModeEnabled:!0,mobileBreakPoint:600,resizable:{enabled:!1},draggable:{enabled:!1,scrollSensitivity:60,scrollSpeed:5,start:function(a,b,c){},drag:function(a,b,c){},stop:function(a,b,c){}}},f.switchSidebar=function(){d("left").toggle()},f.getIdbyAtrr=function(a,b,c){for(var d=0;d<a.length;d++)if(a[d].hasOwnProperty(b)&&a[d][b]===c)return d;return-1},0===Object.keys(k.CONFIG.pages).length?f.noPages=!0:f.noPages=!1;var x=e.innerHeight-110;$(window).resize(function(){x=e.innerHeight-110,f.$apply(function(){f.config={autoHideScrollbar:!1,theme:"minimal-dark",advanced:{updateOnContentResize:!0},setHeight:x,scrollInertia:0}})}),f.config={autoHideScrollbar:!1,theme:"minimal-dark",advanced:{updateOnContentResize:!0},setHeight:x,scrollInertia:0},f.bodyconfig={autoHideScrollbar:!0,theme:"minimal-dark"},k.$on("$stateChangeStart",function(){j().then(function(a){k.devicelist=a.data.result,console.log("Updated devicelist!")})})}]),angular.module("homeydashV3App").controller("SetupCtrl",["$timeout","WizardHandler","$scope","$rootScope","$mdDialog","$mdToast","savesettings","$localStorage","$state","$element",function(a,b,c,d,e,f,g,h,i,j){function k(a){var b={"&":" and ","<":"",">":"",'"':"","'":""};return a.replace(/[&<>"']/g,function(a){return b[a]})}var l=function(a){a.stopPropagation(),a.preventDefault()};c.gridsterOptsSettings={columns:30,colWidth:"auto",rowHeight:60,margins:[10,10],floating:!1,pushing:!1,maxRows:12,defaultSizeX:1,swapping:!0,mobileModeEnabled:!1,mobileBreakPoint:600,resizable:{enabled:!0,handles:["sw","se"],start:function(a,b,c){b[0].addEventListener("click",l,!0)},stop:function(a,b,e){setTimeout(function(){b[0].removeEventListener("click",l,!0)}),c.saveSettings(),console.log(d.CONFIG)}},draggable:{enabled:!0,scrollSensitivity:60,scrollSpeed:5,start:function(a,b,c,d){},drag:function(a,b,c,d){b[0].addEventListener("click",l,!0)},stop:function(a,b,d,e){setTimeout(function(){b[0].removeEventListener("click",l,!0)}),c.saveSettings()}}},c.deleteArray=[],d.$on("$stateChangeStart",function(a,b,d,e,f,g){c.deleteArray=[]}),c.addtodelete=function(a){-1===c.deleteArray.indexOf(a)?c.deleteArray.push(a):c.deleteArray.splice(c.deleteArray.indexOf(a),1),console.log(c.deleteArray)},c.markedDelete=function(a){return-1===c.deleteArray.indexOf(a)?!1:!0},c.storage=h,c.newWidget={},c.isEmpty=function(a,b){return a.hasOwnProperty(b)?!0:void 0},c.filterDevices=function(a,b){var c={};return angular.forEach(a,function(a,d){a.capabilities.hasOwnProperty(b)&&(c[d]=a)}),c},c.currentNavItem=i.params.pagename,d.$on("$stateChangeStart",function(a,b,d,e,f){d[0]||(c.currentNavItem=null),c.currentNavItem=d.pagename}),c.savePage=function(a){a?(d.CONFIG.pages.push({pagename:k(a),widgets:[]}),console.log(k(a)),g.save(d.CONFIG).then(function(a){i.go("setup")},function(a){f.show(f.simple().textContent("ERROR: "+a).position("top right"))})):f.show(f.simple().textContent("ERROR: pagename cannot be empty").position("top right"))},c.savePagename=function(a,b){b?(d.CONFIG.pages[a].pagename=k(b),g.save(d.CONFIG).then(function(){i.go("setup.page",{pagename:b},{reload:!0,inherit:!1,notify:!0}),console.log("New settings saved!")})):f.show(f.simple().textContent("ERROR: pagename cannot be empty").position("top right"))},c.deletePage=function(a){d.CONFIG.pages.splice(a,1),i.go("setup"),g.save(d.CONFIG).then(function(a){},function(a){f.show(f.simple().textContent("ERROR: "+a).position("top right"))})},c.sortableOptionsPages={handle:".menudrag",axis:"x","ui-floating":!0,items:".sortable-item",update:function(a,b){g.save(d.CONFIG)}},c.openAddwidgetDialog=function(a){c.newWidget.widgettype=a,e.show({scope:c,preserveScope:!0,templateUrl:"views/addwidget-dialogs/"+a+".html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.openAddpageDialog=function(a){var b=e.prompt().title("What would you name your page?").textContent("Please provide a name for your new page.").placeholder("Page name").ariaLabel("Page name").targetEvent(a).ok("Save").cancel("Cancel");e.show(b).then(function(a){c.savePage(a)},function(){console.log("Canceled page add")})},c.openRenamepageDialog=function(a){var b=e.prompt().title("What would you name your page?").placeholder("Page name").initialValue(i.params.pagename).ariaLabel("Page name").targetEvent(a).ok("Save").cancel("Cancel");e.show(b).then(function(a){c.savePagename(c.getIdbyAtrr(d.CONFIG.pages,"pagename",i.params.pagename),a)},function(){console.log("Canceled page name edit")})},c.confirmPageDelete=function(a){var b=e.confirm().title("Delete page").textContent("Are you sure you want to delete the page "+i.params.pagename+"?").ariaLabel("Delete page").targetEvent(a).ok("Yes").cancel("No");e.show(b).then(function(){c.deletePage(c.getIdbyAtrr(d.CONFIG.pages,"pagename",i.params.pagename))},function(){console.log("Delete page canceled")})},c.closeDialog=function(){e.hide()},c.saveWidget=function(a){"homeydevices"===c.newWidget.widgettype&&d.CONFIG.pages[a].widgets.push({name:k(c.newWidget.name),id:getRandomId(),icon:c.newWidget.icon,widgettype:c.newWidget.capability.capability,capability:Object.keys(d.devicelist[c.newWidget.device.id].capabilities),deviceid:c.newWidget.device.id,"class":c.newWidget.capability["class"],sizeX:c.newWidget.capability.width,sizeY:c.newWidget.capability.height}),"buienradar"===c.newWidget.widgettype&&d.CONFIG.pages[a].widgets.push({name:k(c.newWidget.name),id:getRandomId(),widgettype:c.newWidget.widgettype,url:c.newWidget.url,sizeX:5,sizeY:4}),"rss"===c.newWidget.widgettype&&d.CONFIG.pages[a].widgets.push({name:k(c.newWidget.name),id:getRandomId(),widgettype:c.newWidget.widgettype,url:c.newWidget.url,sizeX:9,sizeY:4}),"video"===c.newWidget.widgettype&&d.CONFIG.pages[a].widgets.push({name:k(c.newWidget.name),id:getRandomId(),widgettype:c.newWidget.widgettype,url:c.newWidget.url,videotype:c.newWidget.videotype,sizeX:5,sizeY:4}),g.save(d.CONFIG).then(function(){c.closeDialog(),console.log("New settings saved!"),c.newWidget={}})},c.selectedIcon=function(a){return c.newWidget.icon===a?!0:!1},c.removeWidget=function(a,b,h){var i=e.confirm().title("Delete widget").textContent("Are you sure you want to delete "+b.name+"?").ariaLabel("Delete widget").ok("Yes").cancel("No");e.show(i).then(function(){d.CONFIG.pages[c.getIdbyAtrr(d.CONFIG.pages,"pagename",h.pagename)].widgets.splice(a,1),g.save(d.CONFIG).then(function(a){c.deleteArray=[]},function(a){f.show(f.simple().textContent("ERROR: "+a).position("top right"))})},function(){})},c.removeSelectedWidgets=function(a){console.log(a);var b=e.confirm().title("Delete widgets").textContent("Are you sure you want to delete the selected widgets?").ariaLabel("Delete widgets").ok("Yes").cancel("No");e.show(b).then(function(){angular.forEach(c.deleteArray,function(b){d.CONFIG.pages[c.getIdbyAtrr(d.CONFIG.pages,"pagename",a.pagename)].widgets.splice(c.getIdbyAtrr(d.CONFIG.pages[c.getIdbyAtrr(d.CONFIG.pages,"pagename",a.pagename)].widgets,"id",b),1)}),c.deleteArray=[],g.save(d.CONFIG).then(function(a){},function(a){f.show(f.simple().textContent("ERROR: "+a).position("top right"))})},function(){})}}]),angular.module("homeydashV3App").factory("alldevices",["CONFIG","$http",function(a,b){var c={};return c=function(){return b.get("/api/manager/devices/device/")}}]),angular.module("homeydashV3App").factory("device",["CONFIG","$http",function(a,b){var c={};return c.onoff=function(a,c){return b.put("/api/manager/devices/device/"+a+"/state",{onoff:c})},c.dim=function(a,c){return b.put("/api/manager/devices/device/"+a+"/state",{dim:c})},c.button=function(a){return b.put("/api/manager/devices/device/"+a+"/state",{button:null})},c}]),angular.module("homeydashV3App").factory("socket",["CONFIG",function(a){return{on:function(a,b,c){var d=io.connect("/realtime/device/"+b+"/",{transports:["websocket","polling"]});d.on(a,c)}}}]),angular.module("homeydashV3App").factory("savesettings",["CONFIG","$http",function(a,b){var c={};return c.save=function(a){return b.post("/api/app/com.swttt.homeydash/savesettings",a)},c}]),angular.module("homeydashV3App").factory("wallpaper",["CONFIG","$http",function(a,b){var c={};return c=function(){return b.get("/api/manager/users/user/me")}}]),angular.module("homeydashV3App").controller("DevicesCtrl",["$timeout","$scope","$rootScope","$mdToast","device","alldevices","debounce","savesettings","$mdDialog",function(a,b,c,d,e,f,g,h,i){b.showFeedItem=function(a){i.show({templateUrl:"views/widgets/feedDialog.html",clickOutsideToClose:!0,preserveScope:!0,locals:{item:a},controller:["$scope","item","$mdDialog",function(a,b,c){a.item=b,a.closeDialog=function(){console.log("closing dialog!"),c.cancel()}}]})},b.reloadFeed=function(a){b.widget.url=null},b.button=function(a){e.button(a).then(function(a){},function(a){a&&d.show(d.simple().textContent("ERROR: "+a.statusText).position("top right").hideDelay(3e3))})},b.onoff=function(a,b){b?e.onoff(a,!1).then(function(a){},function(b){b&&(d.show(d.simple().textContent("ERROR: "+b.statusText).position("top right").hideDelay(3e3)),c.devicelist[a].state.onoff=!0)}):e.onoff(a,!0).then(function(a){},function(b){b&&(d.show(d.simple().textContent("ERROR: "+b.statusText).position("top right").hideDelay(3e3)),c.devicelist[a].state.onoff=!1)})},b.dim=g(250,function(a,b){e.dim(a,b).then(function(a){},function(a){a&&(d.show(d.simple().textContent("ERROR: "+a.statusText).position("top right").hideDelay(3e3)),f().then(function(a){c.devicelist=a.data.result,console.log("Updated devicelist!")}))})})}]),angular.module("homeydashV3App").controller("AgreementCtrl",["$scope","$mdDialog",function(a,b){a.agree=function(){b.hide()}}]),angular.module("homeydashV3App").directive("rssfeed",["FeedLoader","$timeout",function(a,b){return{templateUrl:function(a,b){return b.template},restrict:"E",scope:!1,link:function(c,d,e){c.$ready=!0,function f(){c.$ready===!0&&a.fetch(c.widget.url).then(function(a){console.log(a.data),c.feed=null,console.log("update rss"),c.feed=a.data}),b(f,3e5)}()}}}]),angular.module("homeydashV3App").factory("FeedLoader",["$http",function(a){return{fetch:function(b){return a.jsonp("https://api.rss2json.com/v1/api.json?rss_url="+b)}}}]),angular.module("homeydashV3App").directive("mjpeg",["$timeout",function(a){return{restrict:"E",scope:{baseSource:"@"},replace:!0,template:'<img style="width:auto;height:100%;" ng-src="{{source}}">',link:function(b,c,d){b.$ready=!0,function e(){b.$ready===!0&&(b.source=b.baseSource+"?_ud="+(Date.now()-6e4),b.$ready=!1),a(e,100)}(),c.bind("load",function(){b.$ready=!0,b.$apply()}),c.bind("error",function(){console.log("error"),b.$ready=!0,b.$apply()})}}}]),angular.module("homeydashV3App").directive("buienradar",["$timeout",function(a){return{restrict:"E",scope:{url:"@"},replace:!0,template:'<img style="width:100%;height:100%;" ng-src="{{source}}">',link:function(b,c,d){b.$ready=!0,function e(){b.$ready===!0&&(b.source=b.url+"?_ud="+(Date.now()-6e4),b.$ready=!1),a(e,6e5)}(),c.bind("load",function(){console.log("buienradar update"),b.$ready=!0,b.$apply()}),c.bind("error",function(){console.log("error"),b.$ready=!0,b.$apply()})}}}]),angular.module("homeydashV3App").run(["$templateCache",function(a){a.put("views/addwidget-dialogs/buienradar.html",'<md-dialog aria-label="Add widget" style="width:50%"> <md-content style="margin:10px;background-color:white"> <div flex="100"> <wizard on-finish="saveWidget(getIdbyAtrr(CONFIG.pages, \'pagename\', params.pagename))" hide-indicators="true"> <wz-step style="text-align:center" wz-title="Step 1"> <h3 style="font-weight:300;text-transform:uppercase">Select a location</h3> <md-input-container> <md-select ng-model="newWidget.url" placeholder="Select a location"> <md-option ng-value="location.url" ng-repeat="location in SETUP.buienradar_urls">{{ location.name }}</md-option> </md-select> </md-input-container><br> <!-- <md-button class="md-raised md-primary " ng-click="newWidget.capability = null;" ui-sref="setup.pages.addwidget({\n              pagename: params.pagename\n            })"> Back </md-button> --> <md-button class="md-raised md-warn" ng-click="closeDialog()"> Cancel </md-button> <md-button ng-disabled="!newWidget.url" class="md-raised md-primary" wz-next> Next </md-button> </wz-step> <wz-step style="text-align:center" wz-title="Step 2"> <h3 style="font-weight:300;text-transform:uppercase">Give your widget a name</h3> <md-input-container style="text-align:left"> <label>Widget name</label> <input name="widgetname" ng-model="newWidget.name"> </md-input-container> <br> <div style="width:100%;text-align:center"> <md-button class="md-raised md-primary" wz-previous> Back </md-button> <md-button class="md-raised md-warn" ng-click="closeDialog()"> Cancel </md-button> <md-button class="md-raised md-primary" ng-disabled="!newWidget.name" wz-finish> Save </md-button> </div> </wz-step> </wizard>  </div> </md-content> </md-dialog>'),a.put("views/addwidget-dialogs/homeydevices.html",'<md-dialog aria-label="Add widget" style="width:50%"> <md-content style="margin:10px;background-color:white"> <div flex="100"> <wizard on-finish="saveWidget(getIdbyAtrr(CONFIG.pages, \'pagename\', params.pagename))" hide-indicators="true"> <wz-step style="text-align:center" wz-title="Step 1"> <h3 style="font-weight:300;text-transform:uppercase">Select a capability</h3> <md-input-container> <md-select ng-model="newWidget.capability" placeholder="Select a capability"> <md-option ng-value="capability" ng-repeat="capability in SETUP.capabilities">{{ capability.description }}</md-option> </md-select> </md-input-container><br> <!-- <md-button class="md-raised md-primary " ng-click="newWidget.capability = null;" ui-sref="setup.pages.addwidget({\n              pagename: params.pagename\n            })"> Back </md-button> --> <md-button class="md-raised md-warn" ng-click="closeDialog()"> Cancel </md-button> <md-button ng-disabled="!newWidget.capability" class="md-raised md-primary" wz-next> Next </md-button> </wz-step> <wz-step style="text-align:center" wz-title="Step 2"> <h3 style="font-weight:300;text-transform:uppercase">Select a device</h3> <md-radio-group style="width:100%" ng-model="newWidget.device"> <md-radio-button style="text-align:left;width:50%;float:left" ng-repeat="device in devicelist" ng-value="device" ng-if="device.capabilities[newWidget.capability.capability]" aria-label="{{ device.name }}"> {{ device.name }} <small style="color:grey">{{ device.zone.name }}</small> </md-radio-button> </md-radio-group> <br> <div style="clear:both"></div> <div style="width:100%;text-align:center"> <md-button class="md-raised md-primary" ng-click="newWidget.device = null;" wz-previous> Back </md-button> <md-button class="md-raised md-warn" ng-click="closeDialog()"> Cancel </md-button> <md-button ng-disabled="!newWidget.device" class="md-raised md-primary" wz-next> Next </md-button> </div> </wz-step> <wz-step style="text-align:center" wz-title="Step 3"> <h3 style="font-weight:300;text-transform:uppercase">Give your widget a name</h3> <md-input-container style="text-align:left"> <label>Widget name</label> <input name="widgetname" ng-model="newWidget.name"> </md-input-container> <h3 style="font-weight:300;display:inline;margin-left:10px;margin-right:10px"> OR </h3> <md-button style="margin-left:0;margin-top:-5px;display:inline" class="md-raised md-primary" ng-click="newWidget.name = newWidget.device.name">copy from device</md-button> <!-- <h3 style="margin-top:0;width:100%;text-align:center;font-weight:300;text-transform:uppercase;">or</h3> --> <br> <div style="width:100%;text-align:center"> <md-button class="md-raised md-primary" ng-click="newWidget.name = null;" wz-previous> Back </md-button> <md-button class="md-raised md-warn" ng-click="closeDialog()"> Cancel </md-button> <md-button ng-disabled="!newWidget.name" class="md-raised md-primary" wz-next> Next </md-button> </div> </wz-step> <wz-step style="text-align:center" wz-title="Step 4"> <h3 style="font-weight:300;text-transform:uppercase">Select an icon for your widget</h3> <div style="height:60px;width:60px;float:left;margin:10px;cursor:pointer" ng-click="newWidget.icon = icon" ng-repeat="icon in SETUP.icons"> <md-icon style="padding:5px" ng-class="{activeIcon: selectedIcon(icon)}" md-svg-icon="images/icons/{{icon}}"></md-icon> </div> <!-- <md-radio-group style="width:100%;text-align:left;" ng-model="newWidget.icon">\n            <md-radio-button style="width:100px;float:left;" ng-repeat="icon in SETUP.icons" ng-value="icon" aria-label="{{icon}}">\n              <md-icon md-svg-icon="images/icons/{{icon}}"></md-icon>\n            </md-radio-button>\n          </md-radio-group> --> <div style="clear:both"></div> <br> <div flex="100" style="text-align:center;float:none"> <md-button class="md-raised md-primary" ng-click="newWidget.icon = null;" wz-previous> Back </md-button> <md-button class="md-raised md-warn" ng-click="closeDialog()"> Cancel </md-button> <md-button ng-disabled="!newWidget.icon" class="md-raised md-primary" wz-next> Next </md-button> </div> </wz-step> <wz-step style="text-align:center" wz-title="Summary"> <h3 style="font-weight:300;text-transform:uppercase">Summary</h3> <div style="width:50%;margin:0 auto;text-align:left;padding:10px;margin-bottom:15px" md-whiteframe="3"> <span> <h4 style="font-weight:300;text-transform:uppercase"> {{params.type}} </h4> <b>Device name: </b>{{newWidget.device.name}} <br> <b>Widget name: </b>{{newWidget.name}} <br> <b>Zone name: </b>{{newWidget.device.zone.name}}<br> <b>Capability: </b>{{newWidget.capability.description}} </span> <br><br> </div> <md-button class="md-raised md-primary" wz-previous> Back </md-button> <md-button class="md-raised md-warn" ng-click="closeDialog()"> Cancel </md-button> <md-button class="md-raised md-primary" wz-finish> Save </md-button> </wz-step> </wizard>  </div> </md-content> </md-dialog>'),a.put("views/addwidget-dialogs/rss.html",'<md-dialog aria-label="Add widget" style="width:50%"> <md-content style="margin:10px;background-color:white"> <div flex="100"> <wizard on-finish="saveWidget(getIdbyAtrr(CONFIG.pages, \'pagename\', params.pagename))" hide-indicators="true"> <wz-step style="text-align:center" wz-title="Step 1"> <h3 style="font-weight:300;text-transform:uppercase">Give your widget a name</h3> <md-input-container style="text-align:left"> <label>Widget name</label> <input name="widgetname" ng-model="newWidget.name"> </md-input-container> <!-- <md-button class="md-raised md-primary " ng-click="newWidget.capability = null;" ui-sref="setup.pages.addwidget({\n              pagename: params.pagename\n            })"> Back </md-button> --> <div style="width:100%;text-align:center"> <md-button class="md-raised md-warn" ng-click="closeDialog()"> Cancel </md-button> <md-button ng-disabled="!newWidget.name" class="md-raised md-primary" wz-next> Next </md-button> </div> </wz-step> <wz-step style="text-align:center" wz-title="Step 2"> <h3 style="font-weight:300;text-transform:uppercase">Provide RSS url</h3> <md-input-container style="text-align:left"> <label>RSS url</label> <input name="url" ng-model="newWidget.url"> </md-input-container> <br> <div style="width:100%;text-align:center"> <md-button class="md-raised md-primary" wz-previous> Back </md-button> <md-button class="md-raised md-warn" ng-click="closeDialog()"> Cancel </md-button> <md-button class="md-raised md-primary" ng-disabled="!newWidget.url" wz-finish> Save </md-button> </div> </wz-step> </wizard>  </div> </md-content> </md-dialog>'),a.put("views/addwidget-dialogs/video.html",'<md-dialog aria-label="Add widget" style="width:50%"> <md-content style="margin:10px;background-color:white"> <div flex="100"> <wizard on-finish="saveWidget(getIdbyAtrr(CONFIG.pages, \'pagename\', params.pagename))" hide-indicators="true"> <wz-step style="text-align:center" wz-title="Step 1"> <h3 style="font-weight:300;text-transform:uppercase">Give your widget a name</h3> <md-input-container style="text-align:left"> <label>Widget name</label> <input name="widgetname" ng-model="newWidget.name"> </md-input-container> <!-- <md-button class="md-raised md-primary " ng-click="newWidget.capability = null;" ui-sref="setup.pages.addwidget({\n              pagename: params.pagename\n            })"> Back </md-button> --> <div style="width:100%;text-align:center"> <md-button class="md-raised md-warn" ng-click="closeDialog()"> Cancel </md-button> <md-button ng-disabled="!newWidget.name" class="md-raised md-primary" wz-next> Next </md-button> </div> </wz-step> <wz-step style="text-align:center" wz-title="Step 2"> <h3 style="font-weight:300;text-transform:uppercase">Select video source format</h3> <md-select ng-model="newWidget.videotype" style="width:50%;margin:0 auto;margin-bottom:30px"> <md-option value="mjpeg">mjpeg</md-option> <md-option value="html5">mp4, ogg or webm</md-option> </md-select> <!-- <md-button class="md-raised md-primary " ng-click="newWidget.capability = null;" ui-sref="setup.pages.addwidget({\n              pagename: params.pagename\n            })"> Back </md-button> --> <div style="width:100%;text-align:center"> <md-button class="md-raised md-warn" ng-click="closeDialog()"> Cancel </md-button> <md-button ng-disabled="!newWidget.videotype" class="md-raised md-primary" wz-next> Next </md-button> </div> </wz-step> <wz-step style="text-align:center" wz-title="Step 3"> <h3 style="font-weight:300;text-transform:uppercase">Provide video url</h3> <md-input-container style="text-align:left"> <label>Video url</label> <input name="url" ng-model="newWidget.url"> </md-input-container> <br> <div style="width:100%;text-align:center"> <md-button class="md-raised md-primary" wz-previous> Back </md-button> <md-button class="md-raised md-warn" ng-click="closeDialog()"> Cancel </md-button> <md-button class="md-raised md-primary" ng-disabled="!newWidget.url" wz-finish> Save </md-button> </div> </wz-step> </wizard>  </div> </md-content> </md-dialog>'),a.put("views/device-page.html",'<div ng-class="{ \'sidebar-margin\': localStorage.sidebarLocked }" class="headerbar" flex="100" flex-xs="100" flex-xs="100" style="height:60px;max-height:60px;padding:17px;z-index:10;position:fixed;top:0;right:0;left:0"> <md-icon ng-if="!localStorage.sidebarLocked" ng-click="switchSidebar()" class="menu-handle">menu</md-icon> <h2 style="margin-left:15px;display:inline;color:rgb(237, 237, 237);text-transform:uppercase;font-weight:300">{{params.pagename}}</h2> <!-- <div ng-if="gridsterOpts.draggable.enabled" class="addwidget">\n    <center>\n      <md-button class="md-raised md-secondary" style="color:rgb(255,171,64);width:150px;height:70px;font-size:18px;font-weight:200;">add widget</md-button>\n    </center>\n  </div> --> <!-- <md-menu>\n    <md-button aria-label="Open demo menu" class="md-icon-button" ng-click="$mdMenu.open($event)">\n      <md-icon md-menu-origin>menu</md-icon>\n    </md-button>\n    <md-menu-content width="2">\n      <md-menu-item ng-repeat="page in CONFIG.pages">\n        <md-button ng-click="ctrl.announceClick($index)"> {{page.pagename}} </md-button>\n      </md-menu-item>\n      <md-menu-item>\n        <md-input-container md-no-float>\n          <input type="text" placeholder="Non-Floating Label">\n        </md-input-container>\n      </md-menu-item>\n    </md-menu-content>\n  </md-menu> --> <md-icon ng-if="!CONFIG.general.hideicon" ng-click="null" style="color:rgb(237, 237, 237);position:absolute;top:20px;right:10px;cursor:pointer" ui-sref="setup.page({pagename: \'{{params.pagename}}\'})">settings</md-icon> <md-icon onclick="location.reload()" style="color:rgb(237, 237, 237);position:absolute;top:20px;right:75px;cursor:pointer">replay</md-icon> </div> <!-- <md-toolbar style="position:fixed;z-index:20;">\n\n  <div class="md-toolbar-tools">\n    <h2 md-truncate flex>My App\'s Title</h2>\n\n    <md-icon ng-if="!CONFIG.general.hideicon" ng-click="null" style="color:white;cursor:pointer;" ui-sref="setup">settings</md-icon>\n    <md-icon onclick="location.reload();" style="color:white;cursor:pointer;">replay</md-icon>\n    <md-icon ng-click="switchEdit()" style="color:white;cursor:pointer;">edit</md-icon>\n  </div>\n\n</md-toolbar> --> <div ng-scrollbars ng-scrollbars-config="bodyconfig" style="width:100%"> <md-content style="background:none;margin:0px;margin-top:60px" gridster="gridsterOpts"> <!-- <widget gridster-item style="overflow:hidden;" size-x="1" size-y="2">\n    <img class="md-whiteframe-3dp" border="0" src="http://api.buienradar.nl/image/1.0/RadarMapNL" style="width:auto;height:100%;min-width:100%;">\n  </widget> --> <widget id="griditem" gridster-item="widget" ng-repeat="widget in CONFIG.pages[getIdbyAtrr(CONFIG.pages, \'pagename\', params.pagename)].widgets track by $index" ng-include src="\'views/widgets/\' + widget.widgettype + \'.html\'" ng-controller="DevicesCtrl" widget="widget.widgettype"> </widget> </md-content> </div>'),a.put("views/dialogs/agreement.html",'<md-dialog> <md-toolbar> <div class="md-toolbar-tools"> <h2 style="font-weight:300;text-transform:uppercase">Agreement</h2> <span flex></span> </div> </md-toolbar> <md-dialog-content style="padding:15px"> <h3 style="font-weight:bold;text-transform:uppercase"> Please read before you continue </h3> <p> For HomeyDash to function properly, it uses the cookie Athom creates on login. Within this cookie is your <b>bearer token</b> stored. This token is used to control your devices, but has the ability to do more then just controlling. (for example adding, removing or changing devices/settings etc.). The chances are small (and i mean really small) but it could happen that some error in the code might remove a device or change something unwanted and without prompting you. Thats why i ask you to agree with the following terms before you can use the dashboard: <ul> <li> I understand the power of the bearer token </li> <li> I agree that HomeyDash uses my bearer token to control my devices </li> <li> I agree that i use this on my own risk </li> <li> I agree that i cannot blame Athom or the creator for any errors and unwanted changes to my devices caused by HomeyDash </li> </ul> </p> <div style="width:100%;text-align:center"> <md-button class="md-primary md-raised" ng-click="agree()"> I Agree </md-button> </div> </md-dialog-content> </md-dialog>'),
a.put("views/direct-page.html",'<!-- <md-toolbar style="position:fixed;z-index:20;">\n\n  <div class="md-toolbar-tools">\n    <h2 md-truncate flex>My App\'s Title</h2>\n\n    <md-icon ng-if="!CONFIG.general.hideicon" ng-click="null" style="color:white;cursor:pointer;" ui-sref="setup">settings</md-icon>\n    <md-icon onclick="location.reload();" style="color:white;cursor:pointer;">replay</md-icon>\n    <md-icon ng-click="switchEdit()" style="color:white;cursor:pointer;">edit</md-icon>\n  </div>\n\n</md-toolbar> --> <div ng-scrollbars ng-scrollbars-config="bodyconfig" style="width:100%"> <md-content style="background:none;margin:0px" gridster="gridsterOptsDirect"> <!-- <widget gridster-item style="overflow:hidden;" size-x="1" size-y="2">\n    <img class="md-whiteframe-3dp" border="0" src="http://api.buienradar.nl/image/1.0/RadarMapNL" style="width:auto;height:100%;min-width:100%;">\n  </widget> --> <widget id="griditem" gridster-item="widget" ng-repeat="widget in CONFIG.pages[getIdbyAtrr(CONFIG.pages, \'pagename\', params.pagename)].widgets track by $index" ng-include src="\'views/widgets/\' + widget.widgettype + \'.html\'" ng-controller="DevicesCtrl" widget="widget.widgettype"> </widget> </md-content> </div>'),a.put("views/main.html",'<div ng-if="hideOverlay" class="idleoverlay"> </div> <md-sidenav style="position:fixed" class="md-sidenav-left" md-component-id="left" md-is-locked-open="localStorage.sidebarLocked" md-whiteframe="4"> <center><img src="images/logo.png" style="padding:5px"></center> <md-list id="sidebar" flex ng-scrollbars ng-scrollbars-config="config"> <md-list-item class="md-1-line" ng-repeat="page in CONFIG.pages" ng-click="switchSidebar()" ui-sref="main.page({pagename: \'{{page.pagename}}\'})"> <div class="md-list-item-text" layout="column" md-scroll-y> {{page.pagename}} </div> <md-divider ng-if="!$last"></md-divider> </md-list-item> </md-list> </md-sidenav> <md-content id="container" ng-class="{ \'sidebar-margin\': localStorage.sidebarLocked }" flex layout="row" layout-wrap style="min-height:100%;overflow:hidden;background:none;-webkit-overflow-scrolling: touch" ui-view> <!-- <div layout-padding flex="100" flex-xs="100" flex-xs="100" style="position:relative;">\n    <md-icon ng-if="!localStorage.sidebarLocked" ng-click="switchSidebar()" class="menu-handle">menu</md-icon>\n    <h2 ng-if="!noPages" style="color:white;text-transform:uppercase;font-weight:300;"><md-icon style="color:white;">keyboard_arrow_left</md-icon> Open a page in the sidebar on the left </h2>\n    <h2 ng-if="noPages" style="color:white;text-transform:uppercase;font-weight:300;">No pages found!</h2>\n    <p ng-if="noPages" style="color:white;"> Press the\n      <md-icon style="color:white;">settings</md-icon> on the top right to go to the setup.</p>\n\n    <md-icon ng-if="!CONFIG.general.hideicon" ng-click="null" style="color:white;position:absolute;top:0px;right:10px;cursor:pointer;" ui-sref="setup">settings</md-icon>\n    <md-icon onclick="location.reload();" style="color:white;position:absolute;top:0px;right:75px;cursor:pointer;">replay</md-icon>\n  </div> --> <div ng-class="{ \'sidebar-margin\': localStorage.sidebarLocked }" class="headerbar" flex="100" flex-xs="100" flex-xs="100" style="height:60px;max-height:60px;padding:17px;z-index:4;position:fixed;top:0;right:0;left:0"> <md-icon ng-if="!localStorage.sidebarLocked" ng-click="switchSidebar()" class="menu-handle">menu</md-icon> <h2 style="margin-left:15px;display:inline;color:white;text-transform:uppercase;font-weight:300">HomeyDash </h2> <!-- <div ng-if="gridsterOpts.draggable.enabled" class="addwidget">\n      <center>\n        <md-button class="md-raised md-secondary" style="color:rgb(255,171,64);width:150px;height:70px;font-size:18px;font-weight:200;">add widget</md-button>\n      </center>\n    </div> --> <md-icon ng-if="!CONFIG.general.hideicon" ng-click="null" style="color:white;position:absolute;top:20px;right:10px;cursor:pointer" ui-sref="setup">settings</md-icon> <md-icon onclick="location.reload()" style="color:white;position:absolute;top:20px;right:75px;cursor:pointer">replay</md-icon> </div> <div style="margin-top:60px;padding:20px"> <h2 ng-if="!noPages" style="color:white;text-transform:uppercase;font-weight:300"><md-icon style="color:white">keyboard_arrow_left</md-icon> Open a page in the sidebar on the left </h2> <h2 ng-if="noPages" style="color:white;text-transform:uppercase;font-weight:300">No pages found!</h2> <p ng-if="noPages" style="color:white"> Press the <md-icon style="color:white">settings</md-icon> on the top right to go to the setup.</p> </div> </md-content>'),a.put("views/setup.html",'<md-toolbar class="md-medium-tall" style="background-color:rgba(62, 62, 62, 0.69);z-index:3"> <div class="md-toolbar-tools"> <h2 style="margin-left:15px;display:inline;color:white;text-transform:uppercase;font-weight:300" flex md-truncate>Settings</h2> <md-button class="md-warn md-raised" ng-if="deleteArray.length" ng-click="removeSelectedWidgets(params);"> <md-icon class="md-warn">delete</md-icon> {{deleteArray.length}} selected widget(s) </md-button> <md-button ng-disabled="true" class="md-warn md-raised" ng-if="!deleteArray.length"> <md-icon class="md-warn">delete</md-icon> 0 selected widgets </md-button> <md-menu ng-if="\'setup.page\' | isState" md-position-mode="target-right target" style="cursor:pointer;margin-right:10px"> <md-button style="color:white" ng-click="$mdMenu.open($event)"> <md-icon style="color:white">add</md-icon> add widget </md-button> <md-menu-content> <md-menu-item ng-repeat="type in SETUP.widgettypes"> <md-button ng-click="openAddwidgetDialog(type.type)"><img style="width:42px;height:42px;display:inline;vertical-align:middle" ng-src="images/widgettypes/{{type.icon}}"><span style="margin-left:5px;line-height:42px;font-size:14px;vertical-align:middle;text-transform:uppercase;font-weight:300">{{type.name}}</span></md-button> </md-menu-item> </md-menu-content> </md-menu> <md-menu ng-if="\'setup.page\' | isState" md-position-mode="target-right target" style="cursor:pointer;margin-right:10px"> <md-button style="color:white;margin-right:10px" ng-click="$mdMenu.open($event)"> <md-icon style="color:white">arrow_drop_down</md-icon> edit page </md-button> <md-menu-content> <md-menu-item> <md-button style="font-weight:300;text-transform:uppercase" ng-click="openRenamepageDialog()"> <md-icon class="">edit</md-icon> Rename page </md-button> </md-menu-item> <md-menu-item> <md-button class="md-warn" style="font-weight:300;text-transform:uppercase" ng-click="confirmPageDelete()"> <md-icon class="md-warn">delete</md-icon> Remove page </md-button> </md-menu-item> </md-menu-content> </md-menu> <md-menu md-position-mode="target-right target" style="cursor:pointer;margin-right:10px"> <md-button class="md-primary" style="margin-right:10px" ng-click="$mdMenu.open($event)"> <md-icon style="">arrow_drop_down</md-icon> settings </md-button> <md-menu-content> <md-menu-item> <md-button style="font-weight:300;text-transform:uppercase" ui-sref="setup.generalsettings"> <md-icon>settings</md-icon> General settings </md-button> </md-menu-item> <md-menu-item> <md-button style="font-weight:300;text-transform:uppercase" ng-click="null"> <md-icon>extension</md-icon> plugins </md-button> </md-menu-item> <md-menu-item> <md-button style="font-weight:300;text-transform:uppercase" ui-sref="main"> <md-icon class="">dashboard</md-icon> back to dashboard </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> <bar style="margin-top:-7px" ui-sortable="sortableOptionsPages" ng-model="CONFIG.pages"> <md-nav-bar class="navbar" md-no-ink-bar="true" md-selected-nav-item="currentNavItem" nav-bar-aria-label="Pages"> <md-nav-item class="menunavitem sortable-item" ng-repeat="page in CONFIG.pages" md-nav-sref="setup.page({pagename: \'{{page.pagename}}\'})" name="{{page.pagename}}" aria-label="{{page.pagename}}"> {{page.pagename}} <md-icon style="cursor:move;margin-left:5px" class="menudrag">more_horiz</md-icon> </md-nav-item> <md-nav-item class="md-primary navbaradd" md-nav-click="openAddpageDialog()" aria-label="add page" name="addpage"> <md-icon>add</md-icon> </md-nav-item> </md-nav-bar> </bar> </md-toolbar> <div flex="100" layout="row" layout-wrap style="margin-top:10px"> <div flex="100" style="" ui-view> <div style="background-color:rgba(255,255,255,1);padding:10px;margin-top:10px;margin-right:10px;margin-left:10px"> <h3 style="font-weight:300;width:100%;text-align:center;color:black">Select a page on the top to edit.</h3> </div> </div> </div>'),a.put("views/setup/generalsettings.html",'<md-list style="background-color:white;margin-top:10px;margin-right:10px;padding:20px"> <md-subheader class="md-no-sticky" style="background-color:white">General</md-subheader> <md-list-item> <p>Set a default page</p> <md-select class="md-secondary" ng-model="storage.defaultPage" aria-label="default page"> <md-option ng-value="false"><em>None</em></md-option> <md-option ng-repeat="page in CONFIG.pages" ng-value="page.pagename"> {{page.pagename}} </md-option> </md-select> </md-list-item> <md-subheader class="md-no-sticky" style="background-color:white">Look and feel</md-subheader> <md-list-item> <p>Set theme</p> <md-select class="md-secondary" ng-model="storage.general.theme" aria-label="theme"> <md-option ng-repeat="theme in SETUP.themes" ng-value="theme"> {{theme}} </md-option> </md-select> </md-list-item> <md-list-item> <p>Set widget background</p> <md-select class="md-secondary" ng-model="storage.general.widgetbackground" aria-label="widget background"> <md-option value="transparant-white-bg"> Transparant white </md-option> <md-option value="transparant-dark-bg"> Transparant dark </md-option> <md-option value="white-bg"> White </md-option> </md-select> </md-list-item> <md-list-item> <p>Hide the setup icon on your dashboard</p> <md-checkbox ng-change="saveSettings()" class="md-secondary" ng-model="CONFIG.general.hideicon"></md-checkbox> </md-list-item> <md-list-item> <p>Hide zone name on widget cards</p> <md-checkbox ng-change="saveSettings()" class="md-secondary" ng-model="CONFIG.general.hidezonename"></md-checkbox> </md-list-item> <md-list-item> <p>Show devicestate when zone name is hidden</p> <md-checkbox ng-change="saveSettings()" class="md-secondary" ng-model="CONFIG.general.showdevicestate"></md-checkbox> </md-list-item> <md-list-item> <p>Lock the sidebar to allways open (this would disable open and close)</p> <md-checkbox ng-change="saveSettings()" class="md-secondary" ng-model="storage.sidebarLocked"></md-checkbox> </md-list-item> <md-list-item> <p>Hide kwh on capable widget cards</p> <md-checkbox ng-change="saveSettings()" class="md-secondary" ng-model="storage.hidekwh"></md-checkbox> </md-list-item> </md-list>'),a.put("views/setup/newpage.html",'<div flex="100" style="background-color:white;margin-top:-10px"> <center> <h2 style="font-weight:300;text-transform:uppercase">Add new page</h2></center> <md-content aria-label="Add new page" style="background-color:white"> <center> <md-input-container md-no-float style="width:50%"> <input ng-model="newpagename" type="text" placeholder="Give your new page a name..."> </md-input-container> </center> </md-content> <center> <md-actions style=""> <md-button ui-sref="setup.pages" class="md-warn md-raised"> Cancel </md-button> <md-button ng-click="savePage(newpagename)" class="md-primary md-raised"> Save </md-button> </md-actions> </center> </div>'),a.put("views/setup/page.html",'<div style="width:100%;background:none;margin-top:-10px;height:100%" gridster="gridsterOptsSettings"> <!-- <widget gridster-item style="overflow:hidden;" size-x="1" size-y="2">\n    <img class="md-whiteframe-3dp" border="0" src="http://api.buienradar.nl/image/1.0/RadarMapNL" style="width:auto;height:100%;min-width:100%;">\n  </widget> --> <widget ng-click="addtodelete(widget.id);" ng-mouseenter="options=true" ng-mouseleave="options=false" style="cursor:move" gridster-item="widget" ng-repeat="widget in CONFIG.pages[getIdbyAtrr(CONFIG.pages, \'pagename\', params.pagename)].widgets" ng-include src="\'views/setup/widgets/\' + widget.widgettype + \'.html\'" ng-controller="DevicesCtrl" widget="widget.widgettype"> </widget> </div> <div class="widgetControl"> <md-button> </md-button></div>'),a.put("views/setup/widget.html",'<div style="min-height:100%;height:100%;cursor:move"> <div class="md-whiteframe-3dp" layout="row" layout-wrap style="height:100%;padding:0;margin:0;background-color:rgba(255,255,255,1);position:relative"> <div flex="100" layout-wrap layout-align="center start" style="margin:0px 20px 0px 20px;position:relative;overflow:hidden"> <div flex="10" style="text-align:left"> <md-icon style="height:20px;width:20px;padding:5px" md-svg-src="images/icons/{{widget.icon}}"></md-icon> </div> <div flex="90"> <h5 md-truncate style="text-align:left;font-weight:300;text-transform:uppercase;margin-top:5px;margin-bottom:5px">{{widget.name}} <small><b>{{widget.widgettype}}</b></small> <h6 md-truncate style="text-align:left;font-weight:300;text-transform:uppercase;margin:0;opacity:0.5" ng-if="!CONFIG.general.hidezonename">{{devicelist[widget.deviceid].zone.name}}</h6></h5> </div> </div> <md-button ng-click="removeWidget($index, widget, params)" class="md-warn md-mini md-fab" style="position:absolute;top:-15px;right:0px" aria-label="Remove"> <md-icon>delete</md-icon> </md-button> </div> </div>'),a.put("views/setup/widgets/buienradar.html",'<md-content ng-class="[localStorage.general.widgetbackground, {markedDel: markedDelete(widget.id)}]" class="md-whiteframe-1dp" layout="row" layout-wrap style="height:100%;padding:0;margin:0;overflow:hidden"> <!-- <img ng-src="{{widget.url}}" style="height:100%;width:100%;" /> --> <buienradar url="{{widget.url}}"> </buienradar> </md-content>'),a.put("views/setup/widgets/button.html",'<!-- <md-content class="md-whiteframe-3dp" layout="row" layout-wrap style="height:100%;padding:0;margin:0;background-color:rgba(255,255,255,1);">\n\n\n\n  <md-list flex="100" style="padding:0;margin:0;">\n    <md-list-item class="md-2-line" style="padding:0;margin:0;">\n      <img ng-src="images/icons/button_on.svg" class="md-avatar" alt="icon" />\n      <div class="md-list-item-text" layout="column" style="margin-botton:0px;">\n        <h3>{{devicelist[widget.deviceid].name}}</h3>\n        <h4 ng-if="!CONFIG.general.hidezonename">{{devicelist[widget.deviceid].zone.name}}</h4>\n      </div>\n    </md-list-item>\n  </md-list>\n  <div flex="100" layout-align="center start" style="margin:0px 20px 0px 20px;text-align:center;">\n\n\n    <md-button ng-click="button(widget.deviceid)" class="md-primary md-raised">\n      trigger\n    </md-button>\n\n\n  </div>\n</md-content> --> <md-content ng-class="[localStorage.general.widgetbackground, {markedDel: markedDelete(widget.id)}]" class="md-whiteframe-1dp" layout="row" layout-wrap style="height:100%;padding:0;margin:0;overflow:hidden"> <!-- <div class="deleteWidget" ng-click="removeWidget($index, widget, params)" ng-show="options" style="">\n    <md-icon style="font-size:14px;line-height:14px;margin-left:3px;margin-top:3px;color:white;">close</md-icon>\n  </div> --> <md-icon class="md-primary widgeticon" md-svg-src="images/icons/{{widget.icon}}" style="width:50%;height:50%;padding:5px"></md-icon> <h4 md-truncate style="font-weight:300;text-transform:uppercase;width:100%;text-align:center">{{widget.name}}</h4> </md-content>'),a.put("views/setup/widgets/dim.html",'<md-content ng-class="[localStorage.general.widgetbackground, {markedDel: markedDelete(widget.id)}]" class="md-whiteframe-1dp" layout="row" layout-wrap style="height:100%;padding:0;margin:0;overflow:hidden"> <!-- <div class="deleteWidget" ng-click="removeWidget($index, widget, params)" ng-show="options" style="">\n    <md-icon style="font-size:14px;line-height:14px;margin-left:3px;margin-top:3px;color:white;">close</md-icon>\n  </div> --> <div flex="100" layout-align="center start" style="margin:0px 20px 0px 20px;position:relative"> <md-icon class="md-primary widgeticon" style="height:40px;width:40px;padding:5px;float:left" md-svg-src="images/icons/{{widget.icon}}" ng-class="{widgetOn: devicelist[widget.deviceid].state.onoff, widgetOff: !devicelist[widget.deviceid].state.onoff}"></md-icon> <div flex="100"> <h3 md-truncate style="text-align:right;font-weight:300;text-transform:uppercase;margin-top:5px;margin-bottom:5px">{{widget.name}}</h3> <h5 style="text-align:right;font-weight:300;text-transform:uppercase;margin:0;opacity:0.5" ng-if="!CONFIG.general.hidezonename">{{devicelist[widget.deviceid].zone.name}}</h5> <h5 style="text-align:right;font-weight:300;text-transform:uppercase;margin:0;opacity:0.5" ng-if="CONFIG.general.hidezonename && CONFIG.general.showdevicestate"><state ng-if="devicelist[widget.deviceid].state.onoff">ON - {{(devicelist[widget.deviceid].state.dim * 100 | number:2) * 1 }}%</state> <state ng-if="!devicelist[widget.deviceid].state.onoff">OFF - {{(devicelist[widget.deviceid].state.dim * 100 | number:2) * 1 }}%</state></h5> </div> </div> <div flex="100" style="margin:0px 20px 0px 20px;position:relative"> <md-slider ng-disabled="true" class="md-primary" ng-class="{sliderOn: devicelist[widget.deviceid].state.onoff, sliderOff: !devicelist[widget.deviceid].state.onoff}" style="margin:0 auto;position:absolute;bottom:0;width:100%" ng-change="dim(widget.deviceid, devicelist[widget.deviceid].state.dim);" ng-model="devicelist[widget.deviceid].state.dim" flex min="0" step="0.01" max="1" aria-label="dim"> </md-slider> </div> </md-content>'),a.put("views/setup/widgets/measure_temperature.html",'<!-- <md-content class="md-whiteframe-3dp" layout="row" layout-wrap style="height:100%;padding:0;margin:0;background-color:rgba(255,255,255,1);">\n\n\n\n  <md-list flex="100" style="padding:0;margin:0;">\n    <md-list-item class="md-2-line" style="padding:0;margin:0;">\n      <img ng-src="images/icons/temperature_on.png" class="md-avatar" alt="icon" />\n      <div class="md-list-item-text" layout="column" style="margin-botton:0px;">\n        <h3>{{devicelist[widget.deviceid].name}}</h3>\n        <h4 ng-if="!CONFIG.general.hidezonename">{{devicelist[widget.deviceid].zone.name}}</h4>\n      </div>\n    </md-list-item>\n  </md-list>\n  <div flex="100" layout-align="center start" style="margin:0px 20px 0px 20px;">\n\n\n    <h3 style="font-weight:200;margin:0 auto;text-align:center;">{{devicelist[widget.deviceid].state.measure_temperature}} °C</h3>\n\n\n  </div>\n</md-content> --> <md-content ng-class="[localStorage.general.widgetbackground, {markedDel: markedDelete(widget.id)}]" class="md-whiteframe-1dp" layout="row" layout-wrap style="height:100%;padding:0;margin:0;overflow:hidden"> <!-- <div class="deleteWidget" ng-click="removeWidget($index, widget, params)" ng-show="options" style="">\n    <md-icon style="font-size:14px;line-height:14px;margin-left:3px;margin-top:3px;color:white;">close</md-icon>\n  </div> --> <md-icon class="md-primary widgeticon" md-svg-src="images/icons/{{widget.icon}}" style="width:25%;height:25%;padding:5px"></md-icon> <h3 md-truncate style="font-weight:300;text-transform:uppercase;width:100%;text-align:center;margin-bottom:0">{{devicelist[widget.deviceid].state.measure_temperature}} °C</h3> <h4 style="font-weight:300;text-transform:uppercase;width:100%;text-align:center;margin-top:5px;opacity:0.5">{{widget.name}}</h4> </md-content>'),a.put("views/setup/widgets/onoff.html",'<md-content ng-class="[localStorage.general.widgetbackground, {markedDel: markedDelete(widget.id)}]" class="md-whiteframe-1dp" layout="row" layout-wrap style="height:100%;padding:0;margin:0;overflow:hidden"> <!-- <div class="deleteWidget" ng-click="removeWidget($index, widget, params)" ng-show="options" style="">\n    <md-icon style="font-size:14px;line-height:14px;margin-left:3px;margin-top:3px;color:white;">close</md-icon>\n  </div> --> <div flex="100" layout-align="center start" style="margin:0px 20px 0px 20px;position:relative"> <md-icon class="md-primary widgeticon" style="height:40px;width:40px;padding:5px;float:left" md-svg-src="images/icons/{{widget.icon}}" ng-class="{widgetOn: devicelist[widget.deviceid].state.onoff, widgetOff: !devicelist[widget.deviceid].state.onoff}"></md-icon> <div flex="100"> <h3 md-truncate style="text-align:right;font-weight:300;text-transform:uppercase;margin-top:5px;margin-bottom:5px">{{widget.name}}</h3> <h5 style="text-align:right;font-weight:300;text-transform:uppercase;margin:0;opacity:0.5" ng-if="!CONFIG.general.hidezonename">{{devicelist[widget.deviceid].zone.name}}</h5> <h5 style="text-align:right;font-weight:300;text-transform:uppercase;margin:0;opacity:0.5" ng-if="CONFIG.general.hidezonename && CONFIG.general.showdevicestate"><state ng-if="devicelist[widget.deviceid].state.onoff">ON</state> <state ng-if="!devicelist[widget.deviceid].state.onoff">OFF</state></h5> </div> </div> </md-content>'),a.put("views/setup/widgets/rss.html",'<md-content ng-class="[localStorage.general.widgetbackground, {markedDel: markedDelete(widget.id)}]" class="md-whiteframe-1dp" layout="row" layout-wrap style="height:100%;padding:0;margin:0;overflow:hidden"> <div flex="100" layout-align="center start" style="position:relative"> <h3 style="margin-left:15px;text-align:left;font-weight:300;text-transform:uppercase;margin-top:5px;margin-bottom:5px">{{widget.name}}</h3> <rssfeed template="views/setup/widgets/rssfeedView.html" url="widget.url" style=""></rssfeed> </div> </md-content>'),a.put("views/setup/widgets/rssfeedView.html",'<md-list class="md-dense" style="width:100%;margin:0"> <md-list-item ng-repeat="item in feed.items | limitTo: 5 "> <p style="font-weight:300;text-transform:uppercase;font-size:14px">{{item.title}}</p> <md-divider ng-if="!$last"></md-divider> </md-list-item> </md-list>'),a.put("views/setup/widgets/video.html",'<md-content ng-class="[localStorage.general.widgetbackground, {markedDel: markedDelete(widget.id)}]" class="md-whiteframe-1dp" layout="row" layout-wrap style="height:100%;padding:0;margin:0;overflow:hidden"> <video ng-if="widget.videotype === \'html5\'" style="height:100%;width:auto" ng-src="{{widget.url}}" style="height:100%;width:100%" autoplay> Your browser does not support the VIDEO tag and/or RTP streams. </video> <mjpeg ng-if="widget.videotype === \'mjpeg\'" base-source="{{widget.url}}"></mjpeg> </md-content>'),a.put("views/widgets/buienradar.html",'<md-content ng-class="[localStorage.general.widgetbackground]" class="md-whiteframe-1dp" layout="row" layout-wrap style="height:100%;padding:0;margin:0;overflow:hidden"> <!-- <img ng-src="{{widget.url}}" style="height:100%;width:100%;" /> --> <buienradar url="{{widget.url}}"> </buienradar> </md-content>'),a.put("views/widgets/button.html",'<!-- <md-content class="md-whiteframe-3dp" layout="row" layout-wrap style="height:100%;padding:0;margin:0;background-color:rgba(255,255,255,1);">\n\n\n\n  <md-list flex="100" style="padding:0;margin:0;">\n    <md-list-item class="md-2-line" style="padding:0;margin:0;">\n      <img ng-src="images/icons/button_on.svg" class="md-avatar" alt="icon" />\n      <div class="md-list-item-text" layout="column" style="margin-botton:0px;">\n        <h3>{{devicelist[widget.deviceid].name}}</h3>\n        <h4 ng-if="!CONFIG.general.hidezonename">{{devicelist[widget.deviceid].zone.name}}</h4>\n      </div>\n    </md-list-item>\n  </md-list>\n  <div flex="100" layout-align="center start" style="margin:0px 20px 0px 20px;text-align:center;">\n\n\n    <md-button ng-click="button(widget.deviceid)" class="md-primary md-raised">\n      trigger\n    </md-button>\n\n\n  </div>\n</md-content> --> <md-content ng-class="localStorage.general.widgetbackground" md-ink-ripple class="md-whiteframe-1dp" ng-click="button(widget.deviceid)" layout="row" layout-wrap style="height:100%;padding:0;margin:0;overflow:hidden"> <md-icon class="md-primary widgeticon" md-svg-src="images/icons/{{widget.icon}}" style="width:50%;height:50%;padding:5px"></md-icon> <h4 md-truncate style="font-weight:300;text-transform:uppercase;width:100%;text-align:center">{{widget.name}}</h4> </md-content>'),a.put("views/widgets/dim.html",'<md-content ng-class="localStorage.general.widgetbackground" class="md-whiteframe-1dp" layout="row" layout-wrap style="height:100%;padding:0;margin:0;overflow:hidden"> <div ng-click="onoff(widget.deviceid, devicelist[widget.deviceid].state.onoff)" flex="100" layout-align="center start" style="margin:0px 20px 0px 20px;position:relative"> <md-icon class="md-primary widgeticon" style="height:40px;width:40px;padding:5px;float:left" md-svg-src="images/icons/{{widget.icon}}" ng-class="{widgetOn: devicelist[widget.deviceid].state.onoff, widgetOff: !devicelist[widget.deviceid].state.onoff}"></md-icon> <div flex="100"> <h3 md-truncate style="text-align:right;font-weight:300;text-transform:uppercase;margin-top:5px;margin-bottom:5px">{{widget.name}}</h3> <h5 style="text-align:right;font-weight:300;text-transform:uppercase;margin:0;opacity:0.5" ng-if="!CONFIG.general.hidezonename">{{devicelist[widget.deviceid].zone.name}}</h5> <h5 style="text-align:right;font-weight:300;text-transform:uppercase;margin:0;opacity:0.5" ng-if="CONFIG.general.hidezonename && CONFIG.general.showdevicestate"><state ng-if="devicelist[widget.deviceid].state.onoff">ON - {{(devicelist[widget.deviceid].state.dim * 100 | number:2) * 1 }}%</state> <state ng-if="!devicelist[widget.deviceid].state.onoff">OFF - {{(devicelist[widget.deviceid].state.dim * 100 | number:2) * 1 }}%</state></h5> </div> </div> <div flex="100" style="margin:0px 20px 0px 20px;position:relative"> <md-slider class="md-primary" ng-class="{sliderOn: devicelist[widget.deviceid].state.onoff, sliderOff: !devicelist[widget.deviceid].state.onoff}" style="margin:0 auto;position:absolute;bottom:0;width:100%" ng-change="dim(widget.deviceid, devicelist[widget.deviceid].state.dim);" ng-model="devicelist[widget.deviceid].state.dim" flex min="0" step="0.01" max="1" aria-label="dim"> </md-slider> </div> </md-content>'),a.put("views/widgets/feedDialog.html",'<md-dialog> <md-dialog-content style="padding:20px"> <h2 style="font-weight:300;text-transform:uppercase">{{item.title}}</h2> <img align="right" ng-src="{{item.enclosure.link}}" style="height:150px;width:auto;margin-left:15px;margin-bottom:15px"> <div ng-bind-html="item.content"> </div> </md-dialog-content> <md-dialog-actions> <md-button ng-click="closeDialog()" class="md-primary">Close</md-button> </md-dialog-actions> </md-dialog>'),a.put("views/widgets/measure_temperature.html",'<!-- <md-content class="md-whiteframe-3dp" layout="row" layout-wrap style="height:100%;padding:0;margin:0;background-color:rgba(255,255,255,1);">\n\n\n\n  <md-list flex="100" style="padding:0;margin:0;">\n    <md-list-item class="md-2-line" style="padding:0;margin:0;">\n      <img ng-src="images/icons/temperature_on.png" class="md-avatar" alt="icon" />\n      <div class="md-list-item-text" layout="column" style="margin-botton:0px;">\n        <h3>{{devicelist[widget.deviceid].name}}</h3>\n        <h4 ng-if="!CONFIG.general.hidezonename">{{devicelist[widget.deviceid].zone.name}}</h4>\n      </div>\n    </md-list-item>\n  </md-list>\n  <div flex="100" layout-align="center start" style="margin:0px 20px 0px 20px;">\n\n\n    <h3 style="font-weight:200;margin:0 auto;text-align:center;">{{devicelist[widget.deviceid].state.measure_temperature}} °C</h3>\n\n\n  </div>\n</md-content> --> <md-content ng-class="localStorage.general.widgetbackground" class="md-whiteframe-1dp" layout="row" layout-wrap style="height:100%;padding:0;margin:0;overflow:hidden"> <md-icon class="md-primary widgeticon" md-svg-src="images/icons/{{widget.icon}}" style="width:25%;height:25%;padding:5px"></md-icon> <h3 md-truncate style="font-weight:300;text-transform:uppercase;width:100%;text-align:center;margin-bottom:0">{{devicelist[widget.deviceid].state.measure_temperature}} °C</h3> <h4 style="font-weight:300;text-transform:uppercase;width:100%;text-align:center;margin-top:5px;opacity:0.5">{{widget.name}}</h4> </md-content>'),a.put("views/widgets/onoff.html",'<md-content ng-class="localStorage.general.widgetbackground" class="md-whiteframe-1dp" layout="row" layout-wrap style="height:100%;padding:0;margin:0;overflow:hidden"> <div ng-click="onoff(widget.deviceid, devicelist[widget.deviceid].state.onoff)" flex="100" layout-align="center start" style="margin:0px 20px 0px 20px;position:relative"> <md-icon class="md-primary widgeticon" style="height:40px;width:40px;padding:5px;float:left" md-svg-src="images/icons/{{widget.icon}}" ng-class="{widgetOn: devicelist[widget.deviceid].state.onoff, widgetOff: !devicelist[widget.deviceid].state.onoff}"></md-icon> <div flex="100"> <h3 md-truncate style="text-align:right;font-weight:300;text-transform:uppercase;margin-top:5px;margin-bottom:5px">{{widget.name}}</h3> <h5 style="text-align:right;font-weight:300;text-transform:uppercase;margin:0;opacity:0.5" ng-if="!CONFIG.general.hidezonename">{{devicelist[widget.deviceid].zone.name}}</h5> <h5 style="text-align:right;font-weight:300;text-transform:uppercase;margin:0;opacity:0.5" ng-if="CONFIG.general.hidezonename && CONFIG.general.showdevicestate"><state ng-if="devicelist[widget.deviceid].state.onoff">ON</state> <state ng-if="!devicelist[widget.deviceid].state.onoff">OFF</state></h5> </div> </div> </md-content>'),a.put("views/widgets/rss.html",'<md-content ng-class="[localStorage.general.widgetbackground, {markedDel: markedDelete(widget.id)}]" class="md-whiteframe-1dp" layout="row" layout-wrap style="height:100%;padding:0;margin:0;overflow:hidden"> <div flex="100" layout-align="center start" style="position:relative"> <h3 style="margin-left:15px;text-align:left;font-weight:300;text-transform:uppercase;margin-top:5px;margin-bottom:5px">{{widget.name}}</h3> <rssfeed template="views/widgets/rssfeedView.html" style=""></rssfeed> </div> </md-content>'),a.put("views/widgets/rssfeedView.html",'<md-list ng-scrollbars ng-scrollbars-config="{autoHideScrollbar: false,theme: \'minimal-dark\', axis: \'y\'}" class="md-dense" style="position:absolute;top:25px;bottom:0;left:0;right:0;overflow-y:auto"> <md-list-item ng-repeat="item in feed.items | limitTo: 5" ng-click="showFeedItem(item)"> <p style="font-weight:300;text-transform:uppercase;font-size:14px">{{item.title}}</p> <md-divider ng-if="!$last"></md-divider> </md-list-item> </md-list>'),a.put("views/widgets/video.html",'<md-content ng-class="[localStorage.general.widgetbackground, {markedDel: markedDelete(widget.id)}]" class="md-whiteframe-1dp" layout="row" layout-wrap style="height:100%;padding:0;margin:0;overflow:hidden"> <video ng-if="widget.videotype === \'html5\'" style="height:100%;width:auto" ng-src="{{widget.url}}" style="height:100%;width:100%" autoplay> Your browser does not support the VIDEO tag and/or RTP streams. </video> <mjpeg ng-if="widget.videotype === \'mjpeg\'" base-source="{{widget.url}}"></mjpeg> </md-content>')}]);